---
title: Dubbo入门教程(1)：Dubbo介绍
date: 2018-05-14 16:40:14
updated: 2018-05-14 16:40:14
tags:
  - 中间件
  - dubbo
categories: 
  - 中间件
  - dubbo
---

Dubbo 是阿里巴巴公司开源的一个高性能优秀的服务框架，使得应用可通过高性能的 RPC 实现服务的输出和输入功能，可以和 Spring框架无缝集成。

在dubbo的官方网站上，是这样来介绍的。DUBBO是一个分布式服务框架，致力于提供高性能和透明化的RPC远程服务调用方案，是阿里巴巴SOA服务化治理方案的核心框架，每天为2,000+个服务提供3,000,000,000+次访问量支持，并被广泛应用于阿里巴巴集团的各成员站点。从这样一段介绍中，有这样几个值得我们关注的点，分布式服务框架以及提供SOA的服务化治理。

<!-- more -->
# 背景
Dubbo开始于电商系统，因此在这里先从电商系统的演变讲起。

## 演变阶段
### 单一应用框架(ORM) 
当网站流量很小时，只需一个应用，将所有功能如下单支付等都部署在一起，以减少部署节点和成本。 

缺点：单一的系统架构，使得在开发过程中，占用的资源越来越多，而且随着流量的增加越来越难以维护 

![image](https://pic.winsky.wang/images/2018/05/14/SouthEast.png)

### 垂直应用框架(MVC) 
垂直应用架构解决了单一应用架构所面临的扩容问题，流量能够分散到各个子系统当中，且系统的体积可控，一定程度上降低了开发人员之间协同以及维护的成本，提升了开发效率。 

缺点：但是在垂直架构中相同逻辑代码需要不断的复制，不能复用。 

![image](https://pic.winsky.wang/images/2018/05/14/SouthEast93606.png)

### 分布式应用架构(RPC) 
当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心 

![image](https://pic.winsky.wang/images/2018/05/14/20170417184005890.png)

### 流动计算架构(SOA) 
随着服务化的进一步发展，服务越来越多，服务之间的调用和依赖关系也越来越复杂，诞生了面向服务的架构体系(SOA)，也因此衍生出了一系列相应的技术，如对服务提供、服务调用、连接处理、通信协议、序列化方式、服务发现、服务路由、日志输出等行为进行封装的服务框架


## 演变过程
从以上是电商系统的演变可以看出架构演变的过程： 

![image](https://pic.winsky.wang/images/2018/05/14/SouthEasteaffb.png)

### 单一应用架构
当网站流量很小时，只需一个应用，将所有功能都部署在一起，以减少部署节点和成本。

此时，用于简化增删改查工作量的 数据访问框架(ORM) 是关键。

### 垂直应用架构
当访问量逐渐增大，单一应用增加机器带来的加速度越来越小，将应用拆成互不相干的几个应用，以提升效率。

此时，用于加速前端页面开发的Web框架(MVC) 是关键。

### 分布式服务架构 
当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求。

此时，用于提高业务复用及整合的 分布式服务框架(RPC) 是关键。

### 流动计算架构 
当服务越来越多，容量的评估，小服务资源的浪费等问题逐渐显现，此时需增加一个调度中心基于访问压力实时管理集群容量，提高集群利用率。

此时，用于提高机器利用率的 资源调度和治理中心(SOA) 是关键。

# Dubbo是什么
Dubbo是：
- 一款分布式服务框架
- 高性能和透明化的RPC远程服务调用方案
- SOA服务治理方案

每天为2千多个服务提供大于30亿次访问量支持，并被广泛应用于阿里巴巴集团的各成员站点以及别的公司的业务中。

# Dubbo架构
![image](https://pic.winsky.wang/images/2018/05/14/SouthEastb1a97.png)

- Provider：暴露服务的服务提供方。 
- Consumer：调用远程服务的服务消费方。
- Registry：服务注册与发现的注册中心。
- Monitor：统计服务的调用次数和调用时间的监控中心。

## 调用流程
0. 服务容器负责启动，加载，运行服务提供者。 
1. 服务提供者在启动时，向注册中心注册自己提供的服务。 
2. 服务消费者在启动时，向注册中心订阅自己所需的服务。 
3. 注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。 
4. 服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。 
5. 服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心

# Dubbo注册中心
对于服务提供方，它需要发布服务，而且由于应用系统的复杂性，服务的数量、类型也不断膨胀； 

对于服务消费方，它最关心如何获取到它所需要的服务，而面对复杂的应用系统，需要管理大量的服务调用。 

而且，对于服务提供方和服务消费方来说，他们还有可能兼具这两种角色，即既需要提供服务，有需要消费服务。

通过将服务统一管理起来，可以有效地优化内部应用对服务发布/使用的流程和管理。服务注册中心可以通过特定协议来完成服务对外的统一。

Dubbo提供的注册中心有如下几种类型可供选择：
- Multicast注册中心
- Zookeeper注册中心
- Redis注册中心
- Simple注册中心

# Dubbo优缺点
## 优点：
1. 透明化的远程方法调用 
- 像调用本地方法一样调用远程方法
- 只需简单配置，没有任何API侵入。
2. 软负载均衡及容错机制 
- 可在内网替代nginx、lvs等硬件负载均衡器。
3. 服务注册中心自动注册 & 配置管理
- 不需要写死服务提供者地址，注册中心基于接口名自动查询提供者ip。
- 使用类似zookeeper等分布式协调服务作为服务注册中心，可以将绝大部分项目配置移入zookeeper集群。
4. 服务接口监控与治理 
-Dubbo-admin与Dubbo-monitor提供了完善的服务接口管理与监控功能，针对不同应用的不同接口，可以进行多版本，多协议，多注册中心管理。

## 缺点：
只支持JAVA语言