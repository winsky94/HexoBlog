---
title: 浅谈Model、ORM、DAO之间的区别
date: 2018-04-21 14:16:14
updated: 2018-04-21 14:16:14
tags:
  - web开发
  - 数据模型
categories: 
  - web开发
---

在做web开发中，经常会碰到这样几个概念：
- Model
- DAO，data access object，数据访问对象
- ORM，object-relational mapping，对象关系映射

这些概念都是和数据相关的，然而他们之间有怎样的区别呢？

<!-- more -->
首先来看Model，模型。模型是MVC中的概念，指的是数据和改变数据的操作（业务逻辑）。模型通常指代现实生活中的某样实体。以订单为例，每个订单都包含许多数据，如客户、价格、明细等等，这些数据都叫做订单这个模型的属性，此外，和订单相关的一些列操作，比如当购买时，你可能需要先检查库存，给与一定的优惠，再更新账户余额和积分等等，这些就叫做业务逻辑，也是模型的一部分，从代码上来讲，是要放在模型中的。

当模型执行完业务逻辑后，我们便要把模型中的数据保存到数据库中。如果我们直接把和数据库相关的代码放在模型里，会使得以后的维护相当的麻烦。在我之前的一个项目中，我们用户的增长相当快，导致一台数据库无法支撑所有的访问，不得不使用分库来解决问题。然而前人把SQL语句直接写在了模型这一层里，这导致分库相当的麻烦，我们只能先把这些SQL语句抽出来，才能把分库进行下去。我们把这些抽出来的SQL代码放到单独的一层，这一层便是DAL，Data Access Layer，数据访问层，它由许多DAO组成，目的便是把和数据库相关的代码封装起来，这样当我们执行分库时，便只用调整DAO的代码了，模型根本不用关心它使用的数据是放在A库还是B库。

DAO其实是来源于J2EE的一个设计模式，当初的目的也是使得企业更换数据库时，不用影响模型层的代码。

与DAO类似，ORM也是一种封装数据访问的概念。然而ORM不像DAO只是一种软件设计的指导原则，强调的是系统应该层次分明。ORM更像是一种工具，有着成熟的产品，比如JAVA界非常有名的Hibernate，以及很多PHP框架里自带的ORM库。他们的好处在于能将你程序中的数据对象自动地转化为关系型数据库中对应的表和列，数据对象间的引用也可以通过这个工具转化为表之间的join，而Hibernate甚至提供一套他们自己的数据查询语言HQL来解决复杂的查询问题。

使用ORM的好处就是使得你的开发几乎不用接触到SQL语句。创建一张表，声明一个对应的类，然后你就只用和这个类的实例进行交互了，至于这个对象里的数据该怎么存储又该怎么获取，通通不用关心。